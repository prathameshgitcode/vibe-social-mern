{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\Prathamesh\\\\Desktop\\\\social\\\\SocialMedia-Project---MERN\\\\SocialMedia\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\Prathamesh\\\\Desktop\\\\social\\\\SocialMedia-Project---MERN\\\\SocialMedia\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\Prathamesh\\\\Desktop\\\\social\\\\SocialMedia-Project---MERN\\\\SocialMedia\\\\client\\\\src\\\\scenes\\\\widgets\\\\PostWidget.jsx\";\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, catch: function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nimport React from \"react\";\nimport { ChatBubbleOutlineOutlined, FavoriteBorderOutlined, FavoriteOutlined, ShareOutlined } from \"@mui/icons-material\";\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\nimport { Box, Button, Divider, IconButton, Input, InputBase, Menu, MenuItem, TextField, Typography, useTheme } from \"@mui/material\";\nimport FlexBetween from \"../../components/FlexBetween\";\nimport Friend from \"../../components/Friend\";\nimport WidgetWrapper from \"../../components/WidgetWrapper\";\nimport { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setPost } from \"../../state\";\nimport PostDelete from \"../postDelete/PostDelete\";\nimport axios from \"axios\";\nimport { CommentPost, LikePost } from \"../../api/PostRequest\";\nvar ITEM_HEIGHT = 48;\nvar PostWidget = function PostWidget(_ref) {\n  var postId = _ref.postId,\n    postUserId = _ref.postUserId,\n    name = _ref.name,\n    description = _ref.description,\n    location = _ref.location,\n    picturePath = _ref.picturePath,\n    userPicturePath = _ref.userPicturePath,\n    likes = _ref.likes,\n    comments = _ref.comments;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isComments = _useState2[0],\n    setIsComments = _useState2[1];\n  var dispatch = useDispatch();\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    comment = _useState4[0],\n    setComment = _useState4[1];\n  var token = useSelector(function (state) {\n    return state.token;\n  });\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  var loggedInUserId = useSelector(function (state) {\n    return state.user._id;\n  });\n  var isLiked = Boolean(likes[loggedInUserId]);\n  var likeCount = Object.keys(likes).length;\n  var _useTheme = useTheme(),\n    palette = _useTheme.palette;\n  var main = palette.neutral.main;\n  var medium = palette.neutral.medium;\n  var primary = palette.primary.main;\n  var ariaLabel = {\n    \"aria-label\": \"description\"\n  };\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  var patchLike = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var response, updatedPost;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return LikePost(postId, loggedInUserId, {\n                headers: {\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n            case 2:\n              response = _context.sent;\n              // const response = await fetch(`http://localhost:5000/posts/${postId}/like`, {\n              //   method: \"PATCH\",\n              //   headers: {\n              //     Authorization: `Bearer ${token}`,\n              //     \"Content-Type\": \"application/json\",\n              //   },\n              //   body: JSON.stringify({ userId: loggedInUserId }),\n              // });\n              console.log(response.data, \"[atch likeee\");\n              if (response.data) {\n                updatedPost = response.data;\n                dispatch(setPost({\n                  post: updatedPost\n                }));\n              }\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return function patchLike() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var patchComment = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var userName, response;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              userName = user.firstName + \" \" + user.lastName;\n              _context2.next = 3;\n              return CommentPost(comment, userName, postId);\n            case 3:\n              response = _context2.sent;\n              console.log(response.data, \"hello\");\n              if (response.data) {\n                console.log(response.data.newCommentPost, \"commented\");\n                dispatch(setPost({\n                  post: response.data.newCommentPost\n                }));\n              }\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return function patchComment() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return /*#__PURE__*/React.createElement(\"box\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, loading ? /*#__PURE__*/React.createElement(WidgetWrapper, {\n    m: \"2rem 0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Friend, {\n    friendId: postUserId,\n    name: name,\n    subtitle: location,\n    userPicturePath: userPicturePath,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    color: main,\n    sx: {\n      mt: \"1rem\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, description), picturePath && /*#__PURE__*/React.createElement(\"img\", {\n    width: \"100%\",\n    height: \"auto\",\n    alt: \"post\",\n    style: {\n      borderRadius: \"0.75rem\",\n      marginTop: \"0.75rem\"\n    },\n    src: \"\".concat(process.env.MONGO_URL, \"/assets/\").concat(picturePath),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(FlexBetween, {\n    mt: \"0.25rem\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FlexBetween, {\n    gap: \"1rem\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FlexBetween, {\n    gap: \"0.3rem\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: patchLike,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, isLiked ? /*#__PURE__*/React.createElement(FavoriteOutlined, {\n    sx: {\n      color: primary\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }\n  }) : /*#__PURE__*/React.createElement(FavoriteBorderOutlined, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, likeCount)), /*#__PURE__*/React.createElement(FlexBetween, {\n    gap: \"0.3rem\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: function onClick() {\n      return setIsComments(!isComments);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ChatBubbleOutlineOutlined, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 19\n    }\n  }, comments.length)), isComments && /*#__PURE__*/React.createElement(FlexBetween, {\n    gap: \"1.5rem\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"outlined-name\",\n    label: \"Comment\",\n    required: true,\n    onChange: function onChange(e) {\n      return setComment(e.target.value);\n    },\n    InputProps: {\n      endAdornment: /*#__PURE__*/React.createElement(Button, {\n        variant: \"outlined\",\n        onClick: patchComment,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 27\n        }\n      }, \"Post\")\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  })))), /*#__PURE__*/React.createElement(IconButton, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(PostDelete, {\n    setLoading: setLoading,\n    postUserId: postUserId,\n    postId: postId,\n    description: description,\n    picturePath: picturePath,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 15\n    }\n  }))), isComments && /*#__PURE__*/React.createElement(Box, {\n    mt: \"0.5rem\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, comments.map(function (comment, i) {\n    return /*#__PURE__*/React.createElement(Box, {\n      key: \"\".concat(name, \"-\").concat(i),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Divider, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Typography, {\n      sx: {\n        color: medium,\n        m: \"0.5rem 0\",\n        pl: \"1rem\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 19\n      }\n    }, comment.username), /*#__PURE__*/React.createElement(Typography, {\n      sx: {\n        color: main,\n        m: \"0.5rem 0\",\n        pl: \"1rem\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 19\n      }\n    }, comment.comment));\n  }), /*#__PURE__*/React.createElement(Divider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 15\n    }\n  }))) : \"\");\n};\nexport default PostWidget;","map":{"version":3,"names":["React","ChatBubbleOutlineOutlined","FavoriteBorderOutlined","FavoriteOutlined","ShareOutlined","MoreVertIcon","Box","Button","Divider","IconButton","Input","InputBase","Menu","MenuItem","TextField","Typography","useTheme","FlexBetween","Friend","WidgetWrapper","useState","useDispatch","useSelector","setPost","PostDelete","axios","CommentPost","LikePost","ITEM_HEIGHT","PostWidget","postId","postUserId","name","description","location","picturePath","userPicturePath","likes","comments","isComments","setIsComments","dispatch","comment","setComment","token","state","user","loggedInUserId","_id","isLiked","Boolean","likeCount","Object","keys","length","palette","main","neutral","medium","primary","ariaLabel","loading","setLoading","patchLike","headers","Authorization","response","console","log","data","updatedPost","post","patchComment","userName","firstName","lastName","newCommentPost","mt","borderRadius","marginTop","process","env","MONGO_URL","color","e","target","value","endAdornment","map","i","m","pl","username"],"sources":["C:/Users/Prathamesh/Desktop/social/SocialMedia-Project---MERN/SocialMedia/client/src/scenes/widgets/PostWidget.jsx"],"sourcesContent":["import React from \"react\";\r\nimport {\r\n  ChatBubbleOutlineOutlined,\r\n  FavoriteBorderOutlined,\r\n  FavoriteOutlined,\r\n  ShareOutlined,\r\n} from \"@mui/icons-material\";\r\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Divider,\r\n  IconButton,\r\n  Input,\r\n  InputBase,\r\n  Menu,\r\n  MenuItem,\r\n  TextField,\r\n  Typography,\r\n  useTheme,\r\n} from \"@mui/material\";\r\nimport FlexBetween from \"../../components/FlexBetween\";\r\nimport Friend from \"../../components/Friend\";\r\nimport WidgetWrapper from \"../../components/WidgetWrapper\";\r\nimport { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setPost } from \"../../state\";\r\nimport PostDelete from \"../postDelete/PostDelete\";\r\nimport axios from \"axios\";\r\nimport { CommentPost, LikePost } from \"../../api/PostRequest\";\r\nconst ITEM_HEIGHT = 48;\r\nconst PostWidget = ({\r\n  postId,\r\n  postUserId,\r\n  name,\r\n  description,\r\n  location,\r\n  picturePath,\r\n  userPicturePath,\r\n  likes,\r\n  comments,\r\n}) => {\r\n  const [isComments, setIsComments] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const [comment, setComment] = useState(\"\");\r\n  const token = useSelector((state) => state.token);\r\n  const user = useSelector((state) => state.user);\r\n\r\n  const loggedInUserId = useSelector((state) => state.user._id);\r\n  const isLiked = Boolean(likes[loggedInUserId]);\r\n  const likeCount = Object.keys(likes).length;\r\n\r\n  const { palette } = useTheme();\r\n  const main = palette.neutral.main;\r\n  const medium = palette.neutral.medium;\r\n  const primary = palette.primary.main;\r\n  const ariaLabel = { \"aria-label\": \"description\" };\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const patchLike = async () => {\r\n    const response = await LikePost(postId, loggedInUserId, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n    // const response = await fetch(`http://localhost:5000/posts/${postId}/like`, {\r\n    //   method: \"PATCH\",\r\n    //   headers: {\r\n    //     Authorization: `Bearer ${token}`,\r\n    //     \"Content-Type\": \"application/json\",\r\n    //   },\r\n    //   body: JSON.stringify({ userId: loggedInUserId }),\r\n    // });\r\n    console.log(response.data, \"[atch likeee\");\r\n\r\n    if (response.data) {\r\n      const updatedPost = response.data;\r\n      dispatch(setPost({ post: updatedPost }));\r\n    }\r\n  };\r\n\r\n  const patchComment = async () => {\r\n    const userName = user.firstName + \" \" + user.lastName;\r\n\r\n    const response = await CommentPost(comment, userName, postId);\r\n    console.log(response.data, \"hello\");\r\n\r\n    if (response.data) {\r\n      console.log(response.data.newCommentPost, \"commented\");\r\n      dispatch(setPost({ post: response.data.newCommentPost }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <box>\r\n      {loading ? (\r\n        <WidgetWrapper m=\"2rem 0\">\r\n          <Friend\r\n            friendId={postUserId}\r\n            name={name}\r\n            subtitle={location}\r\n            userPicturePath={userPicturePath}\r\n          />\r\n\r\n          <Typography color={main} sx={{ mt: \"1rem\" }}>\r\n            {description}\r\n          </Typography>\r\n          {picturePath && (\r\n            <img\r\n              width=\"100%\"\r\n              height=\"auto\"\r\n              alt=\"post\"\r\n              style={{ borderRadius: \"0.75rem\", marginTop: \"0.75rem\" }}\r\n              src={`${process.env.MONGO_URL}/assets/${picturePath}`}\r\n            />\r\n          )}\r\n          <FlexBetween mt=\"0.25rem\">\r\n            <FlexBetween gap=\"1rem\">\r\n              <FlexBetween gap=\"0.3rem\">\r\n                <IconButton onClick={patchLike}>\r\n                  {isLiked ? (\r\n                    <FavoriteOutlined sx={{ color: primary }} />\r\n                  ) : (\r\n                    <FavoriteBorderOutlined />\r\n                  )}\r\n                </IconButton>\r\n                <Typography>{likeCount}</Typography>\r\n              </FlexBetween>\r\n\r\n              <FlexBetween gap=\"0.3rem\">\r\n                <IconButton onClick={() => setIsComments(!isComments)}>\r\n                  <ChatBubbleOutlineOutlined />\r\n                  <Typography>{comments.length}</Typography>\r\n                </IconButton>\r\n\r\n                {isComments && (\r\n                  <FlexBetween gap=\"1.5rem\">\r\n                    {/* <Input\r\n                      label=\"Comment\"\r\n                      onChange={(e) => setComment(e.target.value)}\r\n                      inputProps={ariaLabel}\r\n                    />\r\n                    <Button variant=\"outlined\" onClick={patchComment}>\r\n                      Post\r\n                    </Button> */}\r\n                    <TextField\r\n                      id=\"outlined-name\"\r\n                      label=\"Comment\"\r\n                      required\r\n                      onChange={(e) => setComment(e.target.value)}\r\n                      InputProps={{\r\n                        endAdornment: (\r\n                          <Button variant=\"outlined\" onClick={patchComment}>\r\n                            Post\r\n                          </Button>\r\n                        )\r\n                      }}\r\n                    />\r\n                    {/* value={name}\r\n                  onChange={handleChange} */}\r\n                  </FlexBetween>\r\n                )}\r\n              </FlexBetween>\r\n            </FlexBetween>\r\n\r\n            <IconButton>\r\n              <PostDelete\r\n                setLoading={setLoading}\r\n                postUserId={postUserId}\r\n                postId={postId}\r\n                description={description}\r\n                picturePath={picturePath}\r\n              />\r\n            </IconButton>\r\n          </FlexBetween>\r\n          {isComments && (\r\n            <Box mt=\"0.5rem\">\r\n              {comments.map((comment, i) => (\r\n                <Box key={`${name}-${i}`}>\r\n                  <Divider />\r\n                  <Typography sx={{ color: medium, m: \"0.5rem 0\", pl: \"1rem\" }}>\r\n                    {comment.username}\r\n                  </Typography>\r\n\r\n                  <Typography sx={{ color: main, m: \"0.5rem 0\", pl: \"1rem\" }}>\r\n                    {comment.comment}\r\n                  </Typography>\r\n                </Box>\r\n              ))}\r\n              <Divider />\r\n            </Box>\r\n          )}\r\n        </WidgetWrapper>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n    </box>\r\n  );\r\n};\r\n\r\nexport default PostWidget;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}